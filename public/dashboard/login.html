<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dashboard of Gen</title>
    <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.css"/>
</head>
<body>

<div class="default-login" style="padding:50px;">
    <hr/>
    <br/>

    <div class="row">
        <div class="col-sm-8 col-sm-offset-3">
            <form id="login-form" method="post" class="form-horizontal">
                <div class="form-group">
                    <label for="Account" class="col-sm-2 control-label">ACCOUNT</label>

                    <div class="col-sm-6">
                        <input name="username" type="text" class="form-control" id="Account" placeholder="Account">
                    </div>
                    <div class="col-sm-4">
                        <p class="help-block" style="color: #a94442;"></p>
                    </div>
                </div>
                <div class="form-group">
                    <label for="Password" class="col-sm-2 control-label">PASSWORD</label>

                    <div class="col-sm-6">
                        <input name="password" type="password" class="form-control" id="Password"
                               placeholder="Password">
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-sm-offset-2 col-sm-6">
                        <button type="submit" class="btn btn-primary btn-sm btn-block">Submit</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <hr/>
</div><!-- default-login -->

<script src="node_modules/jquery/dist/jquery.js"></script>
<script src="lib.js"></script>
<script>
    function checkIdentity() {
        if (Identity.get())
            location.href = 'index.html';
    }

    $(document).ready(function () {
        checkIdentity();
        $('#login-form').submit(function () {
            $('.help-block').html();
            var data = $(this).serialize();
            console.log(data);
            API.call({url: '/admin/tokens', data: data, method: 'post'})
                    .success(function (data, status) {
                        Identity.set(data);
                        checkIdentity();
                    })
                    .error(function (res, text, e) {
                        var data = res.responseJSON;
                        $('.help-block').html(data.message);
                    });
            return false;
        });

    });
</script>
</body>
</html>